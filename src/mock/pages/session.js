// 模拟会话数据
const SessionList = [
  {
    "id": "220000198302245319",
    "session_id": "型大号科五给。",
    "last_msg_id": 306,
    "chat_type": "group",
    "create_time": "1976-09-14 00:56:09",
    "update_time": "1992-11-28 15:08:33",
    "create_by": 49,
    "update_by": 113,
    "delete_time": "1995-11-19 11:58:00"
  },
  {
    "id": "630000199310302986",
    "session_id": "太处电果。",
    "last_msg_id": 10,
    "chat_type": "personal",
    "create_time": "1979-03-24 07:19:37",
    "update_time": "2014-09-04 00:31:52",
    "create_by": 531,
    "update_by": 652,
    "delete_time": "1972-01-14 16:15:35"
  },
  {
    "id": "450000199911291166",
    "session_id": "的装断较任点。",
    "last_msg_id": 37,
    "chat_type": "personal",
    "create_time": "1977-09-19 18:06:58",
    "update_time": "1973-07-30 03:06:43",
    "create_by": 901,
    "update_by": 980,
    "delete_time": "2019-02-27 23:43:20"
  },
  {
    "id": "370000199903211605",
    "session_id": "由思同些质。",
    "last_msg_id": 799,
    "chat_type": "group",
    "create_time": "1980-06-11 03:35:33",
    "update_time": "2009-09-03 07:04:38",
    "create_by": 43,
    "update_by": 131,
    "delete_time": "1987-07-07 14:37:56"
  },
  {
    "id": "810000202502228459",
    "session_id": "团局把。",
    "last_msg_id": 556,
    "chat_type": "personal",
    "create_time": "2024-04-25 13:09:12",
    "update_time": "2014-10-24 12:54:58",
    "create_by": 273,
    "update_by": 215,
    "delete_time": "2019-11-22 04:55:16"
  },
  {
    "id": "370000202506105440",
    "session_id": "列极反了记精。",
    "last_msg_id": 166,
    "chat_type": "personal",
    "create_time": "1980-02-22 04:11:57",
    "update_time": "1979-08-11 10:48:10",
    "create_by": 195,
    "update_by": 206,
    "delete_time": "2003-05-19 20:31:47"
  },
  {
    "id": "540000199209108351",
    "session_id": "本和位代存。",
    "last_msg_id": 301,
    "chat_type": "personal",
    "create_time": "2015-07-27 09:25:55",
    "update_time": "1993-09-08 09:48:57",
    "create_by": 11,
    "update_by": 813,
    "delete_time": "2017-07-25 09:04:32"
  },
  {
    "id": "810000199012197050",
    "session_id": "年又原。",
    "last_msg_id": 262,
    "chat_type": "personal",
    "create_time": "2001-09-03 21:50:24",
    "update_time": "2021-03-16 17:50:29",
    "create_by": 161,
    "update_by": 34,
    "delete_time": "2021-10-01 00:19:03"
  },
  {
    "id": "630000201712207658",
    "session_id": "区铁满后品展建。",
    "last_msg_id": 140,
    "chat_type": "group",
    "create_time": "2023-07-23 17:57:13",
    "update_time": "2013-08-14 06:42:50",
    "create_by": 618,
    "update_by": 130,
    "delete_time": "2024-12-02 18:49:20"
  },
  {
    "id": "710000201305072450",
    "session_id": "率于战便根标织然。",
    "last_msg_id": 430,
    "chat_type": "personal",
    "create_time": "1995-09-21 07:06:38",
    "update_time": "1989-12-12 23:36:28",
    "create_by": 795,
    "update_by": 119,
    "delete_time": "1970-11-08 09:23:10"
  },
  {
    "id": "820000199903246065",
    "session_id": "支照什七军王众。",
    "last_msg_id": 118,
    "chat_type": "personal",
    "create_time": "1970-10-19 19:50:59",
    "update_time": "2022-02-23 00:05:40",
    "create_by": 840,
    "update_by": 856,
    "delete_time": "1992-10-19 07:35:55"
  },
  {
    "id": "450000201012218686",
    "session_id": "物将积长维离质。",
    "last_msg_id": 782,
    "chat_type": "personal",
    "create_time": "1973-12-19 22:33:45",
    "update_time": "1989-05-17 04:55:15",
    "create_by": 927,
    "update_by": 900,
    "delete_time": "2002-09-13 13:47:33"
  },
  {
    "id": "630000201705172581",
    "session_id": "路提土海。",
    "last_msg_id": 417,
    "chat_type": "personal",
    "create_time": "2023-04-20 06:13:55",
    "update_time": "1991-08-29 14:37:23",
    "create_by": 74,
    "update_by": 555,
    "delete_time": "2005-05-15 02:14:03"
  },
  {
    "id": "530000200009127738",
    "session_id": "化水关带要年只。",
    "last_msg_id": 714,
    "chat_type": "group",
    "create_time": "2021-07-11 08:37:57",
    "update_time": "1974-08-07 12:33:43",
    "create_by": 910,
    "update_by": 207,
    "delete_time": "1980-02-03 10:15:31"
  },
  {
    "id": "540000200504090161",
    "session_id": "且系是积。",
    "last_msg_id": 239,
    "chat_type": "personal",
    "create_time": "1981-04-09 05:41:36",
    "update_time": "1973-10-26 13:23:03",
    "create_by": 669,
    "update_by": 761,
    "delete_time": "2002-06-28 18:35:52"
  },
  {
    "id": "530000198703276573",
    "session_id": "平整三主学素亲。",
    "last_msg_id": 338,
    "chat_type": "group",
    "create_time": "2017-08-06 04:41:01",
    "update_time": "1990-04-14 11:39:15",
    "create_by": 942,
    "update_by": 896,
    "delete_time": "2006-02-25 15:46:28"
  },
  {
    "id": "620000200105047772",
    "session_id": "王料认族查。",
    "last_msg_id": 811,
    "chat_type": "personal",
    "create_time": "2007-06-13 15:24:09",
    "update_time": "1970-05-10 00:54:51",
    "create_by": 818,
    "update_by": 87,
    "delete_time": "2022-08-30 18:07:34"
  },
  {
    "id": "330000202404245410",
    "session_id": "用中支实院。",
    "last_msg_id": 490,
    "chat_type": "personal",
    "create_time": "1976-01-15 10:23:15",
    "update_time": "1994-01-29 09:03:10",
    "create_by": 323,
    "update_by": 542,
    "delete_time": "2002-02-19 08:42:33"
  }
];

// 生成唯一ID
function generateId() {
  return Date.now().toString();
}

export default [
  // 获取会话列表
  {
    url: '/session',
    method: 'get',
    response: (config) => {
      // 模拟分页和搜索
      const { current = 1, pageSize = 10, session_id, chat_type } = config.query;

      let filteredList = SessionList;

      // 根据关键词搜索
      
      if (session_id) {
        filteredList = SessionList.filter(
          (item) =>
          {
            if(typeof item.session_id === 'string') {
              return item.session_id.includes(session_id);
            }
            return item.session_id == session_id;
          }
        );
      }
      
      if (chat_type) {
        filteredList = SessionList.filter(
          (item) =>
          {
            if(typeof item.chat_type === 'string') {
              return item.chat_type.includes(chat_type);
            }
            return item.chat_type == chat_type;
          }
        );
      }
      

      // 分页处理
      const start = (current - 1) * pageSize;
      const end = start + Number(pageSize);
      const paginatedList = filteredList.slice(start, end);

      return {
        code: 0,
        data: {
          list: paginatedList,
          total: filteredList.length,
          current: Number(current),
          pageSize: Number(pageSize),
        },
      };
    },
  },

  // 获取会话详情
  {
    url: '/session/:id',
    method: 'get',
    response: (config) => {
      const { id } = config.query;
      const item = SessionList.find((item) => item.id === id);

      if (item) {
        return {
          code: 0,
          data: item,
        };
      } else {
        return {
          code: 1,
          message: '会话不存在',
        };
      }
    },
  },

  // 新增会话
  {
    url: '/session',
    method: 'post',
    response: (config) => {
      const data = config.body;
      const now = new Date().toISOString();

      const newItem = {
        id: generateId(),
        ...data,
        create_time: new Date().toISOString(),
        update_time: new Date().toISOString(),
      };

      SessionList.unshift(newItem); // 添加到列表开头

      return {
        code: 0,
        data: newItem,
        message: '新增会话成功',
      };
    },
  },

  // 更新会话
  {
    url: '/session/:id',
    method: 'put',
    response: (config) => {
      const { id } = config.query;
      const data = config.body;
      const index = SessionList.findIndex((item) => item.id === id);

      if (index !== -1) {
        SessionList[index] = {
          ...SessionList[index],
          ...data,
           update_time: new Date().toISOString(),
        };

        return {
          code: 0,
          data: SessionList[index],
          message: '更新会话成功',
        };
      } else {
        return {
          code: 1,
          message: '会话不存在',
        };
      }
    },
  },

  // 删除会话
  {
    url: '/session/:id',
    method: 'delete',
    response: (config) => {
      const { id } = config.query;
      const index = SessionList.findIndex((item) => item.id === id);

      if (index !== -1) {
        const deletedItem = SessionList.splice(index, 1)[0];

        return {
          code: 0,
          data: deletedItem,
          message: '删除会话成功',
        };
      } else {
        return {
          code: 1,
          message: '会话不存在',
        };
      }
    },
  },
];