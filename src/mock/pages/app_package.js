// 模拟App管理数据
const AppPackageList = [
  {
    "id": "15000020220531685X",
    "app_size": 251,
    "create_time": "2025-02-06 20:01:20",
    "update_time": "2020-10-10 22:36:52",
    "create_by": 71,
    "update_by": 319,
    "delete_time": "1981-12-31 07:24:53",
    "app_name": "常超",
    "app_version": "空年门动。",
    "app_description": "直据军关众料政山。",
    "app_file_key": "六京第书。"
  },
  {
    "id": "410000198808186825",
    "app_size": 975,
    "create_time": "2018-11-22 03:21:49",
    "update_time": "1984-04-01 13:16:48",
    "create_by": 778,
    "update_by": 784,
    "delete_time": "2019-09-16 01:40:34",
    "app_name": "龚洋",
    "app_version": "克任才新市力定。",
    "app_description": "由美历看精。",
    "app_file_key": "劳示引离业维产。"
  },
  {
    "id": "990000200705133248",
    "app_size": 868,
    "create_time": "2009-11-18 20:23:48",
    "update_time": "1979-09-07 13:42:07",
    "create_by": 575,
    "update_by": 14,
    "delete_time": "2003-07-07 11:27:24",
    "app_name": "江平",
    "app_version": "收切连保又使。",
    "app_description": "自温什提拉总团。",
    "app_file_key": "采采外。"
  },
  {
    "id": "420000198909122806",
    "app_size": 561,
    "create_time": "2006-03-15 21:26:16",
    "update_time": "1975-05-22 20:00:04",
    "create_by": 999,
    "update_by": 976,
    "delete_time": "1992-08-27 05:06:11",
    "app_name": "苏涛",
    "app_version": "地都等音布次了民。",
    "app_description": "因然被当象原级。",
    "app_file_key": "律给区指。"
  },
  {
    "id": "420000199210152547",
    "app_size": 181,
    "create_time": "1995-05-02 17:36:01",
    "update_time": "2022-03-26 11:16:19",
    "create_by": 586,
    "update_by": 587,
    "delete_time": "2022-12-11 23:04:08",
    "app_name": "龚秀兰",
    "app_version": "共节至。",
    "app_description": "候用价四角再。",
    "app_file_key": "局它业消作它。"
  },
  {
    "id": "54000020081117594X",
    "app_size": 387,
    "create_time": "2012-01-21 22:56:49",
    "update_time": "1996-04-08 01:44:30",
    "create_by": 797,
    "update_by": 568,
    "delete_time": "1973-09-04 03:15:31",
    "app_name": "锺秀兰",
    "app_version": "局次飞又间易。",
    "app_description": "就从利细定省那。",
    "app_file_key": "半性除强义。"
  },
  {
    "id": "370000199209208668",
    "app_size": 206,
    "create_time": "2003-11-21 02:02:24",
    "update_time": "1982-03-03 04:02:22",
    "create_by": 964,
    "update_by": 348,
    "delete_time": "1994-12-21 17:41:21",
    "app_name": "冯娜",
    "app_version": "取处志拉。",
    "app_description": "写持眼团。",
    "app_file_key": "基适们看边形发造。"
  },
  {
    "id": "620000201002166829",
    "app_size": 156,
    "create_time": "2020-12-16 14:05:47",
    "update_time": "2020-11-28 11:22:00",
    "create_by": 882,
    "update_by": 965,
    "delete_time": "2015-01-26 13:06:50",
    "app_name": "宋勇",
    "app_version": "大此而元想手。",
    "app_description": "月存量公三面特。",
    "app_file_key": "整省西。"
  },
  {
    "id": "500000201802288544",
    "app_size": 873,
    "create_time": "2008-01-22 10:13:08",
    "update_time": "1975-04-21 10:10:33",
    "create_by": 274,
    "update_by": 250,
    "delete_time": "1990-06-04 20:08:11",
    "app_name": "雷娟",
    "app_version": "方华四热压发。",
    "app_description": "几用作极。",
    "app_file_key": "世无机构书。"
  },
  {
    "id": "310000199912109660",
    "app_size": 419,
    "create_time": "1985-11-08 10:38:04",
    "update_time": "2009-07-15 17:34:29",
    "create_by": 224,
    "update_by": 583,
    "delete_time": "1983-05-24 05:32:52",
    "app_name": "谭强",
    "app_version": "龙约备细年。",
    "app_description": "切放力安清。",
    "app_file_key": "之族许华今传则。"
  },
  {
    "id": "710000199709182226",
    "app_size": 50,
    "create_time": "2010-05-10 14:03:42",
    "update_time": "2006-08-30 18:59:26",
    "create_by": 262,
    "update_by": 529,
    "delete_time": "1982-04-20 23:11:16",
    "app_name": "潘平",
    "app_version": "称动入。",
    "app_description": "龙志论。",
    "app_file_key": "果商边。"
  },
  {
    "id": "610000197709209553",
    "app_size": 540,
    "create_time": "1978-05-21 05:42:42",
    "update_time": "2002-04-18 11:46:45",
    "create_by": 922,
    "update_by": 639,
    "delete_time": "1972-12-26 21:46:42",
    "app_name": "范娟",
    "app_version": "期做也民其约决。",
    "app_description": "亲温又所世一维。",
    "app_file_key": "积包各见华离做。"
  },
  {
    "id": "460000202008203760",
    "app_size": 416,
    "create_time": "1979-05-01 17:47:50",
    "update_time": "1980-10-19 23:39:01",
    "create_by": 797,
    "update_by": 515,
    "delete_time": "1980-04-01 22:34:09",
    "app_name": "尹军",
    "app_version": "此道资支。",
    "app_description": "无管林音确西出参。",
    "app_file_key": "信近听性设府决先。"
  },
  {
    "id": "420000197004166893",
    "app_size": 729,
    "create_time": "2013-10-01 05:16:29",
    "update_time": "1980-03-16 14:01:58",
    "create_by": 918,
    "update_by": 898,
    "delete_time": "2024-04-15 00:14:25",
    "app_name": "姜平",
    "app_version": "何清数这济门得无。",
    "app_description": "已表面正我此。",
    "app_file_key": "那已目属你热见。"
  },
  {
    "id": "440000199211047435",
    "app_size": 758,
    "create_time": "1999-10-28 23:33:02",
    "update_time": "2006-11-19 07:03:56",
    "create_by": 327,
    "update_by": 566,
    "delete_time": "2001-04-01 13:40:33",
    "app_name": "曹伟",
    "app_version": "把总按收等如己适。",
    "app_description": "发听要。",
    "app_file_key": "感导红平用自你。"
  },
  {
    "id": "510000200909043077",
    "app_size": 306,
    "create_time": "1983-07-26 23:21:32",
    "update_time": "1992-09-22 15:28:57",
    "create_by": 274,
    "update_by": 682,
    "delete_time": "1971-09-12 21:16:53",
    "app_name": "沈艳",
    "app_version": "众外按委运。",
    "app_description": "表新单表石。",
    "app_file_key": "自矿除步空据。"
  },
  {
    "id": "150000199605106814",
    "app_size": 370,
    "create_time": "1981-11-23 12:06:01",
    "update_time": "2000-07-27 21:31:20",
    "create_by": 899,
    "update_by": 399,
    "delete_time": "1989-11-08 09:12:07",
    "app_name": "任艳",
    "app_version": "其南图千小义。",
    "app_description": "今青不。",
    "app_file_key": "不维每团克。"
  },
  {
    "id": "410000198108314793",
    "app_size": 961,
    "create_time": "1994-03-16 12:57:23",
    "update_time": "2003-10-30 13:40:46",
    "create_by": 216,
    "update_by": 783,
    "delete_time": "1996-11-05 07:06:44",
    "app_name": "赖霞",
    "app_version": "确点明周拉表。",
    "app_description": "素入点何立海少。",
    "app_file_key": "外法而温。"
  }
];

// 生成唯一ID
function generateId() {
  return Date.now().toString();
}

export default [
  // 获取App管理列表
  {
    url: '/app-package',
    method: 'get',
    response: (config) => {
      // 模拟分页和搜索
      const { current = 1, pageSize = 10, app_name } = config.query;

      let filteredList = AppPackageList;

      // 根据关键词搜索
      
      if (app_name) {
        filteredList = AppPackageList.filter(
          (item) =>
          {
            if(typeof item.app_name === 'string') {
              return item.app_name.includes(app_name);
            }
            return item.app_name == app_name;
          }
        );
      }
      

      // 分页处理
      const start = (current - 1) * pageSize;
      const end = start + Number(pageSize);
      const paginatedList = filteredList.slice(start, end);

      return {
        code: 0,
        data: {
          list: paginatedList,
          total: filteredList.length,
          current: Number(current),
          pageSize: Number(pageSize),
        },
      };
    },
  },

  // 获取App管理详情
  {
    url: '/app-package/:id',
    method: 'get',
    response: (config) => {
      const { id } = config.query;
      const item = AppPackageList.find((item) => item.id === id);

      if (item) {
        return {
          code: 0,
          data: item,
        };
      } else {
        return {
          code: 1,
          message: 'App管理不存在',
        };
      }
    },
  },

  // 新增App管理
  {
    url: '/app-package',
    method: 'post',
    response: (config) => {
      const data = config.body;
      const now = new Date().toISOString();

      const newItem = {
        id: generateId(),
        ...data,
        create_time: new Date().toISOString(),
        update_time: new Date().toISOString(),
      };

      AppPackageList.unshift(newItem); // 添加到列表开头

      return {
        code: 0,
        data: newItem,
        message: '新增App管理成功',
      };
    },
  },

  // 更新App管理
  {
    url: '/app-package/:id',
    method: 'put',
    response: (config) => {
      const { id } = config.query;
      const data = config.body;
      const index = AppPackageList.findIndex((item) => item.id === id);

      if (index !== -1) {
        AppPackageList[index] = {
          ...AppPackageList[index],
          ...data,
           update_time: new Date().toISOString(),
        };

        return {
          code: 0,
          data: AppPackageList[index],
          message: '更新App管理成功',
        };
      } else {
        return {
          code: 1,
          message: 'App管理不存在',
        };
      }
    },
  },

  // 删除App管理
  {
    url: '/app-package/:id',
    method: 'delete',
    response: (config) => {
      const { id } = config.query;
      const index = AppPackageList.findIndex((item) => item.id === id);

      if (index !== -1) {
        const deletedItem = AppPackageList.splice(index, 1)[0];

        return {
          code: 0,
          data: deletedItem,
          message: '删除App管理成功',
        };
      } else {
        return {
          code: 1,
          message: 'App管理不存在',
        };
      }
    },
  },
];